#!/bin/bash

BASE_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )/.." >/dev/null && pwd )"

rm -rf $BASE_DIR/spec/pb-ruby/*
docker run -v $BASE_DIR/spec:/defs namely/protoc-all -d /defs/pb-src -o /defs/pb-ruby -l ruby

docker run \
    -v "${BASE_DIR}/spec/pb-src:/protofile" \
    -v "${BASE_DIR}/spec:/spec" \
    -e "protofile=hello.proto" \
    -e "output=/spec/pb-js" \
    -e "import_style=commonjs" \
    juanjodiaz/grpc-web-generator
